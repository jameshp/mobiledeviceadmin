<!--
  Copyright (c) 2016, <your name>. All rights reserved. Use of this source code
  is governed by a BSD-style license that can be found in the LICENSE file.
-->
<!-- <link rel="import" href="../iron-icons/maps-icons.html"> -->

<dom-module id="device-list">
  <style>
    :host {
      display: block;
    }
    paper-card {
      margin: 5px;
    }

    .horizontal-section{
      /*padding: 25px;*/
    }

  </style>

  <template>

    <paper-input hidden label="URL" value="{{url}}"></paper-input>
    <!-- <paper-input label="Headers" value="{{headers}}"></paper-input> -->

    <iron-ajax id="deviceRequest" auto verbose
          timeout="10000"
          url="[[url]]" headers='{"Authorization" : "Basic dXNlcjE6cGFzc3dvcmQ="}'
          handle-as="json" loading="{{loading}}" on-error="handleRequestError"
          last-response="{{ajaxResponse}}" last-error="{{ajaxError}}">
    </iron-ajax>
     <div class="horizontal-section">
      <paper-spinner active="{{loading}}" hidden={{!loading}}></paper-spinner>
      <div>{{ajaxError}}</div>
      <div>{{error}}</div>
      <paper-material elevation="1">
      <template is="dom-repeat" items="[[ajaxResponse]]" id="deviceList" filter="filterItems">
          <device-item data=[[item]]></device-item>
      </template>
    </paper-material>
    </div>

  </template>
</dom-module>
